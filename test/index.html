<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/styles.css">
    <title>Test</title>
</head>
<body>  
    <div class="outdiv">
            <h1>Работа с Jason-server</h1>
            <h2>В терминале</h2>
                 
        <xmp>
            Проверка: Установлен ли NODE JS

            $ node -v

            $ npm install json-server --save-dev ==>> Local
            $ sudo npm install json-server -g    ==>> Global
                
            Для установки npm при скачивании проекта в другом месте набрать $ npm i

            Start JSON Server:
                json-server db.json
            </xmp>
    </div>
 

    <div class="outdiv"> <h3>Async function</h3>
            <xmp>
                async function f() {

                    let promise = new Promise((resolve, reject) => {
                        setTimeout(() => resolve("done!"), 1000)
                    });
                    
                    let result = await promise; // wait until the promise resolves (*)
                    
                    alert(result); // "done!"
                    }
                    
                    f();
            </xmp>
            <hr>
            <h2>Вариант 1</h2> 
            <h4>Async function, через function plusCard(data, classDiv) <br>
            {data.forEach..}</h4>
            <xmp>
            const getResourse = async (url) => {
                const result = await fetch(url);
                if (!result.ok) {
                    throw new Error(`Couldn't fetch ${url}, status: ${result.status}`);
                }
            
                return await result.json();
            };
            
            function plusCard(data, classDiv) {
                data.forEach(({img, altimg, title, descr, price}) => {
                    const bit = document.createElement('div');

                    price *= 27;

            bit.classList.add('menu__item');

            bit.innerHTML = `
                <img src=${img} alt=${altimg}>
                <h3 class="menu__item-subtitle">${title}</h3>
                <div class="menu__item-descr">${descr}</div>
                <div class="menu__item-divider"></div>
                <div class="menu__item-price">
                <div class="menu__item-cost">Цена:</div>
                <div class="menu__item-total"><span>${price}</span> грн/день</div>
                </div>
            `;

                    document.querySelector(classDiv).append(bit);
                });
            }
            //-------
            getResourse("http://localhost:3000/menu")
            .then(data => plusCard(data, '.menu1'));
            </xmp>
            <hr>
        <div class="midle"> 
        <div class="menu1"></div>    
        </div>
    </div>

    <div class="outdiv"><h2>Вариант 2</h2> <h3>Async function</h3>  <h4>coздается класс MenuCard</h4>
            <xmp>
            const getResourse2 = async (url) => {
                const result = await fetch(url);
                if (!result.ok) {
                    throw new Error(`Couldn't fetch ${url}, status: ${result.status}`);
                }
            
                return await result.json();
            };
        
            class MenuCard {
                constructor(src, alt, title, descr, price, parensSelrctor, ...classes ) {
                    this.src = src;
                    this.alt = alt;
                    this.title = title;
                    this.descr = descr;
                    this.price = price;
                    this.classes = classes;
                    this.parent = document.querySelector(parensSelrctor);
                    this.transfer = 27;
                    this.changeToUAH();
                }
        
                changeToUAH() {
                    this.price = this.price * this.transfer;
                }
        
                render() {
                    const element = document.createElement('div');
        
                    if (this.classes.length === 0) {
                        this.element = 'menu__item';
                        element.classList.add(this.element);
                    } else {
                        this.classes.forEach(className => element.classList.add(className));
                    }
        
                    element.innerHTML = `
                        <img src=${this.src} alt=${this.alt}>
                        <h3 class="menu__item-subtitle">${this.title}</h3>
                        <div class="menu__item-descr">${this.descr}</div>
                        <div class="menu__item-divider"></div>
                        <div class="menu__item-price">
                            <div class="menu__item-cost">Цена:</div>
                            <div class="menu__item-total"><span>${this.price}</span> грн/день</div>
                        </div>
                    `;
                    this.parent.append(element); 
                }
            }
        
            getResourse2('http://localhost:3000/menu')
                .then(data => {
                    data.forEach(({img, altimg, title, descr, price}) => {
                        new MenuCard(img, altimg, title, descr, price, ".menu2").render();
                    });
                });
        </xmp>
        <hr>
        <div class="midle"> 
        <div class="menu2"></div>    
    </div></div> 

    <div class="outdiv"><h3>Axios function</h3> 
        <xmp>Для axios добавить в html : <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script></xmp><hr>
        <xmp>
        axios
        .get('https://api.coindesk.com/v1/bpi/currentprice.json')
        .then(response => (this.info = response.data.bpi))
        .catch(error => console.log(error));
        </xmp>
        <hr>
        <h2>Вариант 3</h2> 
        <h4>класс MenuCard (из варианта 2)</h4>
        <xmp>
        axios.get('http://localhost:3000/menu')
        .then(response => {
            response.data.forEach(({img, altimg, title, descr, price}) => {
                new MenuCard(img, altimg, title, descr, price, '.menu .container').render();
            });
        });  
        </xmp>
        <div class="midle"> 
            <div class="menu">
                <div class="container"></div> 
            </div>
         
        </div>
    </div> 

    <div class="outdiv">
        <h2>Вариант 4</h2> <h3>Axios function</h3>  <h4>Метод перебора через function plusCard(data) { data.forEach..} (из варианта 1)</h4>
        <xmp>
            axios.get('http://localhost:3000/menu')
            .then(response => plusCard(response.data, '.menu4'));
        </xmp>
        <div class="midle"> 
            <div class="menu4"></div>
        </div>
    </div> 

<hr>

<div class="outdiv"> <h1>Слайдер</h1>
    <div class="midle2">
        <div class="offer__slider">
            <div class="offer__slider-counter">
                <div class="offer__slider-prev">
                    <img id="strelka" src="icons/left.svg" alt="prev">
                </div>
                <span id="current">03</span>
                /
                <span id="total">04</span>
                <div class="offer__slider-next">
                    <img id="strelka" src="icons/right.svg" alt="next">
                </div>
            </div>
            <div class="offer__slider-wrapper">
                <div class="offer______slider-inner2">
                    <div class="offer__slide">
                        <img src="img/slider/IMG_3133.jpg" alt="24">
                    </div>
                    <div class="offer__slide">
                        <img src="img/slider/IMG_2996.jpg" alt="food">
                    </div>
                    <div class="offer__slide">
                        <img src="img/slider/IMG_3074.jpg" alt="oil">
                    </div>
                    <div class="offer__slide">
                        <img src="img/slider/IMG_3091.jpg" alt="paprika">
                    </div>
                    <div class="offer__slide">
                        <img src="img/slider/IMG_3094.jpg" alt="oil2">
                    </div>
                    <div class="offer__slide">
                        <img src="img/slider/Lapenko.jpg" alt="paprika2">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
 <script src="js/script.js"></script>
 <!-- <script src="js/parser.js"></script> -->
</body>
</html>