<html>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<head>
<title>Using Sequences</title>
<link rel="STYLESHEET" type="text/css" href="images/xpolecat.css">
<link rel="STYLESHEET" type="text/css" href="images/ie.content.css">
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="toc.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href="LiB0076.html"><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href="LiB0078.html"><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</div></td></tr></table>
<br>
<div class="chapter">
<a name="ch12"></a>
<div class="section">
<h2 class="first-section-title"><a name="825"></a><a name="ch12lev1sec6"></a>Using Sequences</h2><a name="826"></a><a name="IDX-348"></a>
<p class="para">
<i class="emphasis">Sequences</i> are the objects that allow you to simulate autonumbered fields with Oracle. DB2 also support sequences.</p>
<p class="para">A sequence is a database object that, when queried, always returns a new value. By default the sequence has a seed of one and an increment value of one. You can create such a sequence with a simple command like this:</p>
<div class="informalexample">
<pre class="literallayout">
CREATE SEQUENCE FriendIDSeq;
</pre>
</div>
<p class="para">You create a sequence with an initial value of 1,000 like this:</p>
<div class="informalexample">
<pre class="literallayout">
CREATE SEQUENCE FriendIDSeq INCREMENT BY 1 START WITH 1000;
</pre>
</div>
<p class="para">You can drop a sequence, like most database objects, using the <span class="fixed">DROP</span> command:</p>
<div class="informalexample">
<pre class="literallayout">
DROP SEQUENCE FriendIDSeq;
</pre>
</div>
<p class="para">In order to test the <span class="fixed">FriendIDSeq</span> sequence, let's re-create the <span class="fixed">Friend</span> table. This time you have a <span class="fixed">FriendID</span> integer column as the primary key:</p>
<div class="informalexample">
<pre class="literallayout">
CREATE TABLE Friend (
   FriendID INT PRIMARY KEY NOT NULL,
   Name VARCHAR(50),
   PhoneNo VARCHAR(15) DEFAULT 'Unknown Phone');
</pre>
</div>
<p class="para">Once the sequence and the new <span class="fixed">Friend</span> table are in place, insert some new records into <span class="fixed">Friend</span> like this:</p>
<div class="informalexample">
<pre class="literallayout">
INSERT INTO Friend (FriendID, Name, PhoneNo)
             VALUES (FriendIDSeq.NextVal, 'Mike', '123');
INSERT INTO Friend (FriendID, Name, PhoneNo)
             VALUES (FriendIDSeq.NextVal, 'John', '456');
INSERT INTO Friend (FriendID, Name, PhoneNo)
             VALUES (FriendIDSeq.NextVal, 'Cath', '789');
</pre>
</div>
<p class="para">Now the <span class="fixed">Friend</span> table contains something like this:</p>
<a name="827"></a><a name="IDX-349"></a>
<div class="informalexample">
<pre class="literallayout">
FriendID  Name                 PhoneNo

--------- -------------------- ---------------
1000      Mike                   123
1001      John                   456
1002      Cath                   789
</pre>
</div>
<p class="para">If you want to see the last sequence value generated, you can call its <span class="fixed">CurrVal</span> property. This query displays the last value generated by <span class="fixed">FriendIDSeq</span>:</p>
<div class="informalexample">
<pre class="literallayout">
SELECT FriendIDSeq.CurrVal FROM DUAL;

</pre>
</div>
<table border="0" cellspacing="0" cellpadding="0" class="note">
<tr>
<td valign="top" class="admon-check"></td><td valign="top" class="admon-title">Note </td><td valign="top" class="admon-body">
<p class="first-para">The <i class="emphasis"><span class="fixed">DUAL</span></i> table is a special table with one row and one column named <i class="emphasis"><span class="fixed">DUMMY</span></i> of type <i class="emphasis"><span class="fixed">CHAR(1)</span></i>. This table is useful when you want to get quick information not related to any special table but rather from an external source or function, just like you did for querying the current value of the sequence. Another simple example for using <i class="emphasis"><span class="fixed">DUAL</span></i> is getting the current system value using <i class="emphasis"><span class="fixed">SELECT</span></i> <i class="emphasis"><span class="fixed">SYSDATE FROM DUAL</span></i> or calculating mathematical functions such as <i class="emphasis"><span class="fixed">SELECT POWER (2,5) FROM DUAL</span></i>.</p>
</td>
</tr>
</table>
<p class="last-para">Sequences are particularly useful (in conjunction with triggers) for simulating autonumbering in Oracle. You'll look at how to do this in more detail in <a href="LiB0083.html#859" target="_parent" class="chapterjump">Chapter 13</a>, "Triggers," where you look at triggers in depth, but let's look at a simple example here of how to do this in the different database systems.</p>
</div>
</div><br>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="toc.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td>
<td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href="LiB0076.html"><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href="LiB0078.html"><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a>
</div></td></tr></table>
</body></html>